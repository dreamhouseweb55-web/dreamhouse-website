---
pagination:
  data: products.products
  size: 1
  alias: product
permalink: "product/{{ product.id | slug }}/index.html"
layout: base.njk
title: "{{ product.name }}"
---

<div class="container py-5">
  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/" class="text-decoration-none text-muted">الرئيسية</a></li>
      <li class="breadcrumb-item"><a href="/products/" class="text-decoration-none text-muted">المنتجات</a></li>
      <li class="breadcrumb-item active text-primary fw-bold" aria-current="page">{{ product.name }}</li>
    </ol>
  </nav>

  <div class="row gx-5 mb-5 align-items-center">
    <!-- Product Image -->
    <div class="col-lg-6 mb-4 mb-lg-0">
      <div class="card border-0 shadow-lg rounded-4 overflow-hidden position-relative">
         <!-- Badge if price is high or special -->
         {% if product.price and product.price < 20000 %}
            <span class="position-absolute top-0 start-0 bg-danger text-white px-3 py-1 m-3 rounded-pill fw-bold shadow-sm z-2">سعر مميز</span>
         {% endif %}
        <img src="{{ product.image }}" class="img-fluid w-100 object-fit-cover" alt="{{ product.image_alt or product.name }}" style="aspect-ratio: 4/3; transition: transform 0.5s ease;">
      </div>
    </div>

    <!-- Product Info -->
    <div class="col-lg-6">
      <h1 class="display-4 fw-bold mb-3 text-dark">{{ product.name }}</h1>
      
      <div class="d-flex align-items-center gap-3 mb-4">
        <span class="h2 fw-bold text-warning mb-0">
          {% if product.price %}
            {{ product.price.toLocaleString() }} ج.م
          {% else %}
            تواصل للسعر
          {% endif %}
        </span>
        <span class="badge bg-success rounded-pill px-3 py-2">متاح الآن</span>
      </div>

      <div class="text-muted fs-5 lh-lg mb-4">
        {% if product.long_description %}
            {{ product.long_description | safe }}
        {% else %}
            {{ product.description }}
        {% endif %}
      </div>

      {% if product.features %}
      <div class="mb-5">
        <h5 class="fw-bold mb-3">المميزات:</h5>
        <ul class="list-unstyled">
          {% for feature in product.features %}
            <li class="mb-2 d-flex align-items-center text-secondary">
              <i class="fas fa-check-circle text-warning me-2 fs-5"></i>
              {{ feature }}
            </li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      <div class="d-flex gap-2 flex-wrap">
        <button class="btn btn-primary btn-lg flex-grow-1 js-add-to-cart shadow-sm" data-id="{{ product.id }}">
          <i class="fas fa-cart-plus me-2"></i> أضف للسلة
        </button>
        <a href="https://wa.me/{{ settings.contact.whatsapp }}?text=مرحباً، أستفسر عن هذا المنتج:%0a%0a*{{ product.name }}*" target="_blank" class="btn btn-warning btn-lg flex-grow-1 text-dark fw-bold shadow-sm">
          <i class="fab fa-whatsapp me-2"></i> اطلب عبر واتساب
        </a>
      </div>
      
      <div class="mt-4 pt-3 border-top text-muted small d-flex justify-content-between">
        <span><i class="fas fa-truck text-primary me-1"></i> توصيل سريع</span>
        <span><i class="fas fa-shield-alt text-primary me-1"></i> ضمان حقيقي</span>
        <span><i class="fas fa-credit-card text-primary me-1"></i> دفع عند الاستلام</span>
      </div>
    </div>
  </div>

  <!-- Related Products Section -->
  <div class="py-5 border-top">
    <h3 class="fw-bold mb-4 text-center">منتجات قد تعجبك أيضاً</h3>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4 start-products-loop">
      {% set related_counter = 0 %}
      {% for related in products.products | shuffle %}
        {% if related.id != product.id and related_counter < 4 %}
          <div class="col">
            <div class="card h-100 border-0 shadow-sm transition-hover hover-lift product-card" style="transition: all 0.3s ease;">
               <div class="position-relative overflow-hidden rounded-top-3">
                 <a href="/product/{{ related.id | slug }}/" class="d-block">
                    <img src="{{ related.image }}" class="card-img-top object-fit-cover" alt="{{ related.name }}" style="height: 250px;">
                 </a>
                 {% if related.price == 0 %}
                    <span class="position-absolute top-0 end-0 bg-info text-white px-2 py-1 m-2 rounded small fw-bold">جديد</span>
                 {% endif %}
               </div>
              <div class="card-body text-center p-3">
                <h5 class="card-title fw-bold fs-6 mb-2">
                    <a href="/product/{{ related.id | slug }}/" class="text-decoration-none text-dark stretched-link">{{ related.name }}</a>
                </h5>
                <p class="text-warning fw-bold mb-0">
                  {% if related.price %}
                    {{ related.price.toLocaleString() }} ج.م
                  {% else %}
                    تواصل للسعر
                  {% endif %}
                </p>
              </div>
            </div>
          </div>
          {% set related_counter = related_counter + 1 %}
        {% endif %}
      {% endfor %}
    </div>
  </div>

</div>

<style>
.hover-lift:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
}
</style>
